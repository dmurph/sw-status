<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>sw-status-element Demo</title>
  <link rel="import" href="sw-status-element.html">
</head>
<body unresolved>
  <button id="install">Install Service Worker</button>
  <button id="uninstall">Uninstall Service Worker</button>
  <p>
    <ul>
      <li>A page is not controlled by a ServiceWorker unless it is loaded after the ServiceWorker is registered.
      <li>Ctrl-Shift-R will force the page to not be controlled by a ServiceWorker, even if one is registered.
      <li>A page remains controlled by a ServiceWorker even after the worker is uninstalled.
      <li>ServiceWorker spec is <a href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/">here</a>.
    </ul>
  </p>
  <p>An example of using <code>&lt;sw-status-element&gt;</code>:</p>

  <sw-status-element></sw-status-element>


  <script>
     if (navigator.serviceWorker) {
      document.getElementById('install').addEventListener('click', function() {
        navigator.serviceWorker.register(
          'empty-sw.js', { scope: window.location.pathname })
            .then(function(serviceWorker) {
              console.log('Successfully installed ServiceWorker');
            }, function(why) {
              console.log('Failed to install:' + why);
            });
      });

      document.getElementById('uninstall').addEventListener('click', function() {
        navigator.serviceWorker.getRegistration(window.location.pathname)
            .then(function(registration) {
              if (!registration) {
                console.log('No registration controlling page "' + window.location.pathname + '".');
                return;
              }
              registration.unregister()
                  .then(function(yn) {
                    console.log('Registration successfull: ' + yn);
                  }, function(error) {
                    console.log('Error unregistering: ' + error);
                  });
            }, function(error) {
              console.log("Error getting registration: ", error);
            });
      });
    } else {
      console.log("Browser does not support Service Worker, are you using Chrome Canary?  Is the Service Worker flag switched on? chrome://flags/#enable-service-worker");
    }
  </script>

</body>
</html>
